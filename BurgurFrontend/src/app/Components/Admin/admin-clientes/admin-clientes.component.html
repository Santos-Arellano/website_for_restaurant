<!-- Admin Clientes Section -->
<section class="admin-clientes-section">
  <div class="container">
    <!-- Admin Header -->
    <div class="admin-header">
      <h1 class="admin-title">Gestión de Clientes</h1>
      <p class="admin-subtitle">Administra los clientes registrados en el sistema</p>
      
      <!-- Stats Cards -->
      <div class="admin-stats">
        <div class="stat-card">
          <i class="fas fa-users"></i>
          <div class="stat-info">
            <span class="stat-number">{{ totalClientes }}</span>
            <span class="stat-label">Total Clientes</span>
          </div>
        </div>
        <div class="stat-card">
          <i class="fas fa-user-check"></i>
          <div class="stat-info">
            <span class="stat-number">{{ clientesActivos }}</span>
            <span class="stat-label">Clientes Activos</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Search and Filter Bar -->
    <div class="search-bar">
      <div class="search-input-group">
        <i class="fas fa-search search-icon"></i>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Buscar clientes..." 
          [(ngModel)]="filtroTexto"
          (input)="filtrarClientes()">
      </div>
      <div class="filter-controls">
        <button class="btn-add-cliente" (click)="abrirModalAgregarCliente()">
          <i class="fas fa-user-plus"></i>
          Agregar Cliente
        </button>
      </div>
    </div>

    <!-- Clientes Table -->
    <div class="clientes-table">
      <div class="table-header">
        <span>NOMBRE</span>
        <span>APELLIDO</span>
        <span>CORREO</span>
        <span>TELÉFONO</span>
        <span>ACCIONES</span>
      </div>

      <!-- Angular Clientes Loop -->
      <div class="table-row" 
           *ngFor="let cliente of clientesFiltrados" 
           [attr.data-cliente-id]="cliente.id">
        <div class="cell">
          <span class="cliente-name">{{ cliente.nombre }}</span>
        </div>
        <div class="cell">
          <span class="cliente-name">{{ cliente.apellido }}</span>
        </div>
        <div class="cell">
          <span class="cliente-email">{{ cliente.correo }}</span>
        </div>
        <div class="cell">
          <span class="cliente-phone">{{ cliente.telefono || 'No registrado' }}</span>
        </div>
        <div class="cell actions-cell">
          <button class="btn-action btn-edit" 
                  (click)="editarCliente(cliente)">
            <i class="fas fa-edit"></i>
          </button>
          <button class="btn-action btn-delete" 
                  (click)="eliminarCliente(cliente.id)">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="clientesFiltrados.length === 0">
        <i class="fas fa-users"></i>
        <h3>No hay clientes</h3>
        <p>Comienza agregando tu primer cliente</p>
        <button class="btn-add-cliente" (click)="abrirModalAgregarCliente()">
          <i class="fas fa-user-plus"></i>
          Agregar Primer Cliente
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Modal Agregar/Editar Cliente -->
<div class="modal-overlay" *ngIf="mostrarModal" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ modoEdicion ? 'Editar Cliente' : 'Agregar Cliente' }}</h3>
      <button class="btn-close" (click)="cerrarModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <form class="modal-form" (ngSubmit)="guardarCliente()" #clienteForm="ngForm">
      <div class="form-group">
        <label for="nombre">Nombre</label>
        <input 
          type="text" 
          id="nombre" 
          name="nombre"
          [(ngModel)]="clienteSeleccionado.nombre" 
          required
          #nombre="ngModel"
          class="form-input">
        <div class="error-message" *ngIf="nombre.invalid && nombre.touched">
          El nombre es requerido
        </div>
      </div>
      
      <div class="form-group">
        <label for="apellido">Apellido</label>
        <input 
          type="text" 
          id="apellido" 
          name="apellido"
          [(ngModel)]="clienteSeleccionado.apellido" 
          required
          #apellido="ngModel"
          class="form-input">
        <div class="error-message" *ngIf="apellido.invalid && apellido.touched">
          El apellido es requerido
        </div>
      </div>
      
      <div class="form-group">
        <label for="correo">Correo Electrónico</label>
        <input 
          type="email" 
          id="correo" 
          name="correo"
          [(ngModel)]="clienteSeleccionado.correo" 
          required
          email
          #correo="ngModel"
          class="form-input">
        <div class="error-message" *ngIf="correo.invalid && correo.touched">
          <span *ngIf="correo.errors?.['required']">El correo es requerido</span>
          <span *ngIf="correo.errors?.['email']">Ingrese un correo válido</span>
        </div>
      </div>
      
      <div class="form-group">
        <label for="telefono">Teléfono</label>
        <input 
          type="tel" 
          id="telefono" 
          name="telefono"
          [(ngModel)]="clienteSeleccionado.telefono" 
          class="form-input">
      </div>
      
      <div class="form-group">
        <label for="direccion">Dirección</label>
        <textarea 
          id="direccion" 
          name="direccion"
          [(ngModel)]="clienteSeleccionado.direccion" 
          class="form-input"
          rows="3"></textarea>
      </div>
      
      <div class="modal-actions">
        <button type="button" class="btn-cancel" (click)="cerrarModal()">
          Cancelar
        </button>
        <button type="submit" class="btn-save" [disabled]="!clienteForm.valid">
          {{ modoEdicion ? 'Actualizar' : 'Guardar' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" *ngIf="cargando">
  <div class="loading-spinner">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Cargando clientes...</p>
  </div>
</div>