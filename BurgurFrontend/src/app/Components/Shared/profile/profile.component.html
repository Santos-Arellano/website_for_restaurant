<div class="profile-container">
  <div class="profile-header">
    <button class="btn-back" (click)="goBack()">
      <i class="fas fa-arrow-left"></i>
      Volver
    </button>
    <h2>Mi Perfil</h2>
    <button class="btn-logout" (click)="logout()">
      <i class="fas fa-sign-out-alt"></i>
      Cerrar Sesión
    </button>
  </div>

  <div class="profile-content" *ngIf="currentCliente">
    <!-- Mensajes de estado -->
    <div class="alert alert-success" *ngIf="successMessage">
      <i class="fas fa-check-circle"></i>
      {{ successMessage }}
    </div>
    
    <div class="alert alert-error" *ngIf="errorMessage">
      <i class="fas fa-exclamation-circle"></i>
      {{ errorMessage }}
    </div>

    <!-- Vista de información (modo lectura) -->
    <div class="profile-info" *ngIf="!isEditing">
      <div class="profile-avatar">
        <div class="avatar-circle">
          <i class="fas fa-user"></i>
        </div>
        <h3>{{ currentCliente.nombre }} {{ currentCliente.apellido }}</h3>
        <p class="member-since">Miembro desde {{ currentCliente.fechaRegistro | date:'MMMM yyyy' }}</p>
      </div>

      <div class="info-grid">
        <div class="info-item">
          <label>Nombre:</label>
          <span>{{ currentCliente.nombre }}</span>
        </div>
        
        <div class="info-item">
          <label>Apellido:</label>
          <span>{{ currentCliente.apellido }}</span>
        </div>
        
        <div class="info-item">
          <label>Correo Electrónico:</label>
          <span>{{ currentCliente.correo }}</span>
        </div>
        
        <div class="info-item">
          <label>Teléfono:</label>
          <span>{{ currentCliente.telefono }}</span>
        </div>
        
        <div class="info-item full-width">
          <label>Dirección:</label>
          <span>{{ currentCliente.direccion }}</span>
        </div>
      </div>

      <div class="profile-actions">
        <button class="btn-edit" (click)="toggleEdit()">
          <i class="fas fa-edit"></i>
          Editar Perfil
        </button>
      </div>
    </div>

    <!-- Formulario de edición -->
    <div class="profile-edit" *ngIf="isEditing">
      <form (ngSubmit)="onSubmit()" #profileForm="ngForm">
        <div class="form-grid">
          <div class="form-group">
            <label for="nombre">Nombre *</label>
            <input
              type="text"
              id="nombre"
              name="nombre"
              [(ngModel)]="editForm.nombre"
              required
              class="form-control"
              placeholder="Ingresa tu nombre"
            />
          </div>

          <div class="form-group">
            <label for="apellido">Apellido *</label>
            <input
              type="text"
              id="apellido"
              name="apellido"
              [(ngModel)]="editForm.apellido"
              required
              class="form-control"
              placeholder="Ingresa tu apellido"
            />
          </div>

          <div class="form-group">
            <label for="correo">Correo Electrónico *</label>
            <input
              type="email"
              id="correo"
              name="correo"
              [(ngModel)]="editForm.correo"
              required
              class="form-control"
              placeholder="correo@ejemplo.com"
            />
          </div>

          <div class="form-group">
            <label for="telefono">Teléfono *</label>
            <input
              type="tel"
              id="telefono"
              name="telefono"
              [(ngModel)]="editForm.telefono"
              required
              class="form-control"
              placeholder="Ej: 3001234567"
            />
          </div>

          <div class="form-group full-width">
            <label for="direccion">Dirección *</label>
            <textarea
              id="direccion"
              name="direccion"
              [(ngModel)]="editForm.direccion"
              required
              class="form-control"
              rows="3"
              placeholder="Ingresa tu dirección completa"
            ></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button 
            type="button" 
            class="btn-cancel" 
            (click)="toggleEdit()"
            [disabled]="isLoading"
          >
            Cancelar
          </button>
          
          <button 
            type="submit" 
            class="btn-save"
            [disabled]="isLoading || !profileForm.form.valid"
          >
            <span *ngIf="!isLoading">
              <i class="fas fa-save"></i>
              Guardar Cambios
            </span>
            <span *ngIf="isLoading">
              <i class="fas fa-spinner fa-spin"></i>
              Guardando...
            </span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Estado de carga inicial -->
  <div class="loading-state" *ngIf="!currentCliente">
    <div class="spinner">
      <i class="fas fa-spinner fa-spin"></i>
    </div>
    <p>Cargando perfil...</p>
  </div>
</div>