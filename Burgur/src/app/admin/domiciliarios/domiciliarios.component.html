<!-- Header -->
<header class="site-header">
  <div class="container header-container">
    <a routerLink="/" class="logo">
      <div class="logo-icon-wrapper">
        <img src="/assets/images/Logo.png" alt="Burger Club Logo" class="logo-icon">
      </div>
      <span class="logo-text">BURGER CLUB</span>
    </a>

    <nav class="main-nav">
      <ul>
        <li><a routerLink="/">Inicio</a></li>
        <li><a routerLink="/menu">Menú</a></li>
        <li><a routerLink="/admin/dashboard">Dashboard</a></li>
        <li><a routerLink="/admin/products">Productos</a></li>
        <li><a routerLink="/admin/adicionales">Adicionales</a></li>
        <li><a routerLink="/admin/clientes">Clientes</a></li>
        <li><a routerLink="/admin/domiciliarios" class="active">Domiciliarios</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Main Content -->
<main class="admin-section">
  <div class="container">
    <div class="admin-header">
      <h1 class="admin-title">Gestión de Domiciliarios</h1>
      <p class="admin-subtitle">Administra los domiciliarios registrados en el sistema</p>
    </div>
    
    <!-- Stats Cards -->
    <div class="admin-stats">
      <div class="stat-card">
        <i class="fas fa-motorcycle"></i>
        <div class="stat-info">
          <span class="stat-number">{{domiciliarioStats.totalDomiciliarios}}</span>
          <span class="stat-label">Total Domiciliarios</span>
        </div>
      </div>
      
      <div class="stat-card">
        <i class="fas fa-check-circle"></i>
        <div class="stat-info">
          <span class="stat-number">{{domiciliarioStats.domiciliariosDisponibles}}</span>
          <span class="stat-label">Disponibles</span>
        </div>
      </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="admin-actions">
      <button class="action-btn primary" (click)="openAddDomiciliarioModal()">
        <i class="fas fa-plus"></i> Nuevo Domiciliario
      </button>
      <button class="action-btn secondary" (click)="refreshData()">
        <i class="fas fa-sync-alt"></i> Refrescar
      </button>
    </div>
    
    <!-- Domiciliarios Table -->
    <div class="admin-table-container">
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Cédula</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let domiciliario of domiciliarios">
            <td>{{domiciliario.id}}</td>
            <td>{{domiciliario.nombre}}</td>
            <td>{{domiciliario.cedula}}</td>
            <td>
              <span *ngIf="domiciliario.disponible" class="status-badge available">Disponible</span>
              <span *ngIf="!domiciliario.disponible" class="status-badge unavailable">No Disponible</span>
            </td>
            <td class="actions-cell">
              <button class="btn-edit" (click)="editDomiciliario(domiciliario.id)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn-delete" (click)="deleteDomiciliario(domiciliario.id)">
                <i class="fas fa-trash"></i>
              </button>
              <button class="btn-toggle-status" (click)="toggleStatus(domiciliario.id)">
                <i class="fas fa-exchange-alt"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="domiciliarios.length === 0">
            <td colspan="5" class="empty-table">No hay domiciliarios registrados</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>

<!-- Modal para Crear/Editar Domiciliario -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content modal-form" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2><i class="fas fa-motorcycle"></i> {{isEditing ? 'Editar Domiciliario' : 'Nuevo Domiciliario'}}</h2>
      <button class="modal-close" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="saveDomiciliario()" #domiciliarioForm="ngForm">
        <div class="form-group">
          <label for="nombre">Nombre Completo</label>
          <input type="text" 
                 id="nombre" 
                 name="nombre"
                 class="form-control"
                 placeholder="Ingrese el nombre completo"
                 [(ngModel)]="currentDomiciliario.nombre" 
                 required
                 #nombreInput="ngModel">
          <div class="form-help" *ngIf="nombreInput.invalid && nombreInput.touched">
            <i class="fas fa-exclamation-circle"></i> El nombre es requerido
          </div>
        </div>
        
        <div class="form-group">
          <label for="cedula">Cédula</label>
          <input type="text" 
                 id="cedula" 
                 name="cedula"
                 class="form-control"
                 placeholder="Número de cédula"
                 [(ngModel)]="currentDomiciliario.cedula" 
                 required
                 #cedulaInput="ngModel">
          <div class="form-help" *ngIf="cedulaInput.invalid && cedulaInput.touched">
            <i class="fas fa-exclamation-circle"></i> La cédula es requerida
          </div>
        </div>
        
        <div class="form-group">
          <label for="disponible">Estado de Disponibilidad</label>
          <select id="disponible" 
                  name="disponible"
                  class="form-control"
                  [(ngModel)]="currentDomiciliario.disponible">
            <option [value]="true">🟢 Disponible</option>
            <option [value]="false">🔴 No Disponible</option>
          </select>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="closeModal()">
        <i class="fas fa-times"></i> Cancelar
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="!domiciliarioForm.form.valid" (click)="saveDomiciliario()">
        <i class="fas fa-save"></i> {{isEditing ? 'Actualizar' : 'Guardar'}}
      </button>
    </div>
  </div>
</div>

<!-- Modal de Confirmación -->
<div class="modal-overlay" *ngIf="showConfirmModal" (click)="closeConfirmModal()">
  <div class="modal-content modal-form" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2><i class="fas fa-exclamation-triangle warning-icon"></i> Confirmar Eliminación</h2>
      <button class="modal-close" (click)="closeConfirmModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <p class="warning-text">
        <i class="fas fa-info-circle"></i>
        ¿Estás seguro de que deseas eliminar este domiciliario? Esta acción no se puede deshacer.
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="closeConfirmModal()">
        <i class="fas fa-times"></i> Cancelar
      </button>
      <button class="btn btn-danger" (click)="confirmDelete()">
        <i class="fas fa-trash"></i> Eliminar
      </button>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="site-footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <div class="footer-logo">
          <img src="/assets/images/Logo.png" alt="Burger Club" class="footer-logo-img">
          <h3>Burger Club Admin</h3>
        </div>
        <p>Panel de administración para la gestión completa del restaurante.</p>
      </div>
      <div class="footer-section">
        <h3>Gestión</h3>
        <ul class="footer-links">
          <li><a routerLink="/admin/dashboard">Dashboard</a></li>
          <li><a routerLink="/admin/products">Productos</a></li>
          <li><a routerLink="/admin/adicionales">Adicionales</a></li>
          <li><a routerLink="/admin/clientes">Clientes</a></li>
          <li><a routerLink="/admin/domiciliarios">Domiciliarios</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Sistema</h3>
        <div class="contact-info">
          <p><i class="fas fa-server"></i> Sistema v1.0</p>
          <p><i class="fas fa-database"></i> Base de datos activa</p>
          <p><i class="fas fa-shield-alt"></i> Acceso seguro</p>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 Burger Club. Panel Administrativo - Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<!-- Notification Container -->
<div class="notification-container">
  <div class="notification" 
       *ngFor="let notification of notifications" 
       [class]="'notification-' + notification.type"
       [@slideIn]>
    <i [class]="getNotificationIcon(notification.type)"></i>
    <span>{{notification.message}}</span>
    <button class="notification-close" (click)="removeNotification(notification.id)">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>