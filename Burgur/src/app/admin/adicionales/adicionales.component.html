<!-- Header -->
<header class="site-header">
  <div class="container header-container">
    <a routerLink="/" class="logo">
      <div class="logo-icon-wrapper">
        <img src="/assets/images/Logo.png" alt="Burger Club Logo" class="logo-icon">
      </div>
      <span class="logo-text">BURGER CLUB</span>
    </a>

    <nav class="main-nav">
      <ul>
        <li><a routerLink="/">Inicio</a></li>
        <li><a routerLink="/menu">Menú</a></li>
        <li><a routerLink="/admin">Dashboard</a></li>
        <li><a routerLink="/admin/productos">Productos</a></li>
        <li><a routerLink="/admin/adicionales" class="admin-nav">Adicionales</a></li>
        <li><a routerLink="/admin/clientes">Clientes</a></li>
        <li><a routerLink="/admin/domiciliarios">Domiciliarios</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Admin Adicionales Section -->
<main class="admin-adicionales-section">
  <div class="container">
    <!-- Admin Header -->
    <div class="admin-header">
      <h1 class="admin-title">Gestión de Adicionales</h1>
      <p class="admin-subtitle">Administra los adicionales disponibles para los productos</p>
      
      <!-- Stats Cards -->
      <div class="admin-stats">
        <div class="stat-card">
          <i class="fas fa-plus-circle"></i>
          <div class="stat-info">
            <span class="stat-number">{{ stats.totalAdicionales }}</span>
            <span class="stat-label">Total Adicionales</span>
          </div>
        </div>
        <div class="stat-card">
          <i class="fas fa-check-circle"></i>
          <div class="stat-info">
            <span class="stat-number">{{ stats.adicionalesActivos }}</span>
            <span class="stat-label">Adicionales Activos</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Search and Filter Bar -->
    <div class="search-bar">
      <div class="search-input-group">
        <i class="fas fa-search search-icon"></i>
        <input type="text" class="search-input" placeholder="Buscar adicionales..." 
               [(ngModel)]="searchTerm" (input)="filterAdicionales()">
      </div>
      <div class="filter-controls">
        <button class="btn-add-adicional" (click)="openAddAdicionalModal()">
          <i class="fas fa-plus"></i>
          Agregar Adicional
        </button>
      </div>
    </div>

    <!-- Adicionales Table -->
    <div class="adicionales-table">
      <div class="table-header">
        <span>NOMBRE</span>
        <span>PRECIO</span>
        <span>CATEGORÍAS</span>
        <span>ACCIONES</span>
      </div>

      <!-- Adicionales Loop -->
      <div class="table-row" *ngFor="let adicional of filteredAdicionales" 
           [attr.data-adicional-id]="adicional.id">
        <div class="cell">
          <span class="adicional-name">{{ adicional.nombre }}</span>
        </div>
        <div class="cell">
          <span class="adicional-price">${{ adicional.precio | number:'1.0-0' }}</span>
        </div>
        <div class="cell">
          <div class="categoria-badges">
            <span class="categoria-badge" *ngFor="let categoria of adicional.categorias">
              {{ categoria | titlecase }}
            </span>
          </div>
        </div>
        <div class="cell actions-cell">
          <button class="btn-action btn-edit" (click)="editAdicional(adicional)">
            <i class="fas fa-edit"></i>
          </button>
          <button class="btn-action btn-delete" (click)="deleteAdicional(adicional.id)">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="adicionales.length === 0">
        <i class="fas fa-plus-circle"></i>
        <h3>No hay adicionales</h3>
        <p>Comienza agregando tu primer adicional</p>
        <button class="btn-add-adicional" (click)="openAddAdicionalModal()">
          <i class="fas fa-plus"></i>
          Agregar Primer Adicional
        </button>
      </div>
    </div>
  </div>
</main>

<!-- Adicional Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content modal-form" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>
        <i class="fas fa-plus-circle" *ngIf="!isEditing"></i>
        <i class="fas fa-edit" *ngIf="isEditing"></i>
        {{ isEditing ? 'Editar Adicional' : 'Agregar Adicional' }}
      </h3>
      <button class="modal-close" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="saveAdicional()" #adicionalForm="ngForm" class="admin-form">
        <div class="form-group">
          <label for="nombre">Nombre del Adicional</label>
          <input type="text" id="nombre" name="nombre" 
                 [(ngModel)]="currentAdicional.nombre" 
                 class="form-control"
                 placeholder="Ej: Queso extra, Tocino, Aguacate..."
                 required
                 #nombreField="ngModel">
          <div class="field-error" *ngIf="nombreField.invalid && nombreField.touched">
            El nombre del adicional es requerido
          </div>
        </div>
        <div class="form-group">
          <label for="precio">Precio</label>
          <input type="number" id="precio" name="precio" 
                 [(ngModel)]="currentAdicional.precio" 
                 class="form-control"
                 placeholder="0"
                 required min="0" step="100"
                 #precioField="ngModel">
          <div class="field-error" *ngIf="precioField.invalid && precioField.touched">
            El precio es requerido y debe ser mayor a 0
          </div>
        </div>
        <div class="form-group">
          <label for="categorias">Categorías Compatibles</label>
          <input type="text" id="categorias" name="categorias" 
                 [(ngModel)]="categoriasString" 
                 class="form-control"
                 placeholder="hamburguesa, sandwich, pizza, bebida">
          <small class="form-help">Separa las categorías con comas. Ej: hamburguesa, sandwich</small>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="closeModal()">
        <i class="fas fa-times"></i>
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" 
              (click)="saveAdicional()" 
              [disabled]="!adicionalForm.valid">
        <i class="fas fa-save"></i>
        {{ isEditing ? 'Actualizar' : 'Guardar' }}
      </button>
    </div>
  </div>
</div>

<!-- Confirmation Modal -->
<div class="modal-overlay" *ngIf="showConfirmModal" (click)="closeConfirmModal()">
  <div class="modal-content confirmation-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>
        <i class="fas fa-exclamation-triangle"></i>
        Confirmar Eliminación
      </h3>
      <button class="modal-close" (click)="closeConfirmModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <p>¿Estás seguro de que deseas eliminar este adicional?</p>
      <p class="warning-text">Esta acción no se puede deshacer.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="closeConfirmModal()">
        <i class="fas fa-times"></i>
        Cancelar
      </button>
      <button type="button" class="btn btn-delete" (click)="confirmDelete()">
        <i class="fas fa-trash"></i>
        Eliminar
      </button>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="site-footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Burger Club Admin</h3>
        <p>Sistema de administración para gestionar productos, clientes y pedidos.</p>
      </div>
      <div class="footer-section">
        <h4>Enlaces Rápidos</h4>
        <ul>
          <li><a routerLink="/admin">Dashboard</a></li>
          <li><a routerLink="/admin/productos">Productos</a></li>
          <li><a routerLink="/admin/adicionales">Adicionales</a></li>
          <li><a routerLink="/admin/clientes">Clientes</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 Burger Club. Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<!-- Notifications -->
<div class="notification-container">
  <div class="notification" *ngFor="let notification of notifications" 
       [ngClass]="'notification-' + notification.type"
       [@slideIn]>
    <i class="fas" [ngClass]="{
      'fa-check-circle': notification.type === 'success',
      'fa-exclamation-triangle': notification.type === 'warning',
      'fa-times-circle': notification.type === 'error',
      'fa-info-circle': notification.type === 'info'
    }"></i>
    <span>{{ notification.message }}</span>
    <button class="notification-close" (click)="removeNotification(notification)">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>